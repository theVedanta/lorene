<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lorene Pay - Account</title>
    <link
      href="https://fonts.googleapis.com/css?family=Poppins:200,400,500,600,700,900"
      rel="stylesheet"
    />
    <link
      href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />

    <link href="../../css/bootstrap.min.css" rel="stylesheet" />
    <link href="./../css/paper-dashboard.min.css?v=2.0.1" rel="stylesheet" />
    <link href="/css/account.css" rel="stylesheet" />
  </head>
  <body>
    <div class="wrapper">
      <div class="sidebar" data-color="white" data-active-color="danger">
        <div class="logo" style="display: flex; justify-content: space-between">
          <div class="ff">
            <a href="/account" class="simple-text logo-mini">
              <% if (user.logo) { %>
              <img src="/img/<%= user.logo %>" alt="" />
              <% } else { %>
              <img style="width: 70%" src="../assets/logoT.svg" alt="" />
              <% } %>
            </a>
            <a href="/account" class="simple-text logo-normal">
              <%= user.name %>
            </a>
          </div>
          <div
            style="
              display: flex;
              justify-content: center;
              align-items: center;
              transform: translateY(-10%);
              margin-right: 1vw;
            "
            class="prof-opts"
          >
            <i
              style="font-size: 18px; cursor: pointer"
              class="fas fa-chevron-down"
            ></i>
          </div>
        </div>
        <div class="sidebar-wrapper">
          <ul class="side-opts">
            <li><a href="/change-pw">Change Password</a></li>
            <li><a href="/logout">Logout</a></li>
          </ul>
          <ul class="nav">
            <li>
              <a href="/dashboard">
                <i class="fas fa-home"></i>
                <p>Home</p>
              </a>
            </li>
            <li>
              <a href="/transactions">
                <i class="fas fa-money-check-alt"></i>
                <p>Transactions</p>
              </a>
            </li>
            <li>
              <a href="/settlements">
                <i class="fas fa-business-time"></i>
                <p>Settlements</p>
              </a>
            </li>
            <li>
              <a href="/refunds">
                <i class="fas fa-exchange-alt"></i>
                <p>Refunds</p>
              </a>
            </li>
            <li>
              <a href="/quotations">
                <i class="fas fa-tags"></i>
                <p>Quotations</p>
              </a>
            </li>
            <li>
              <a href="/proforma">
                <i class="fas fa-file-invoice"></i>
                <p>Proforma Invoices</p>
              </a>
            </li>
            <li>
              <a href="/invoices">
                <i class="fas fa-file-invoice-dollar"></i>
                <p>Invoices</p>
              </a>
            </li>
            <li>
              <a href="/paylinks">
                <i class="fas fa-paperclip"></i>
                <p>Payment Links</p>
              </a>
            </li>
            <li>
              <a href="/pages">
                <i class="fas fa-newspaper"></i>
                <p>Pages</p>
              </a>
            </li>
            <li>
              <a href="/customers">
                <i class="fas fa-user-friends"></i>
                <p>Customers</p>
              </a>
            </li>
            <li class="active">
              <a href="#">
                <i class="fas fa-user-cog"></i>
                <p>My Account</p>
              </a>
            </li>
            <li>
              <a href="/settings">
                <i class="fas fa-cog"></i>
                <p>Settings</p>
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="main-panel">
        <nav
          class="
            navbar navbar-expand-lg navbar-absolute
            fixed-top
            navbar-transparent
          "
        >
          <div class="container-fluid">
            <div class="navbar-wrapper">
              <div class="navbar-toggle">
                <button type="button" class="navbar-toggler">
                  <span class="navbar-toggler-bar bar1"></span>
                  <span class="navbar-toggler-bar bar2"></span>
                  <span class="navbar-toggler-bar bar3"></span>
                </button>
              </div>
            </div>
          </div>
        </nav>

        <div class="content">
          <div class="row">
            <div class="col">
              <div class="card card-stats">
                <div class="card-head">
                  <div class="left">
                    <h4>
                      <i class="fas fa-user-cog"></i>&nbsp;&nbsp;My Account
                    </h4>
                  </div>
                  <div class="right">
                    <h6>
                      Activation Status :
                      <span><%= user.verified ? 'Complete' : 'Pending' %></span>
                    </h6>
                  </div>
                </div>

                <div class="acc-pages">
                  <button class="acc-act">Basic</button>
                  <button>Documents</button>
                </div>

                <div class="user-details">
                  <h4>User Details</h4>
                  <div class="detail-box">
                    <div class="unit">
                      <h5>Name</h5>
                      <span>:</span>
                      <div class="input">
                        <input readonly type="text" value="<%= user.name %>" />
                      </div>
                    </div>

                    <div class="unit">
                      <h5>Email</h5>
                      <span>:</span>
                      <div class="input">
                        <input readonly type="text" value="<%= user.mail %>" />
                      </div>
                    </div>

                    <div class="unit">
                      <h5>Phone</h5>
                      <span>:</span>
                      <div class="input">
                        <input readonly type="text" value="<%= user.phone %>" />
                      </div>
                    </div>

                    <div class="unit">
                      <h5>State</h5>
                      <span>:</span>
                      <div class="input">
                        <input readonly type="text" value="<%= user.state %>" />
                      </div>
                    </div>

                    <% if (user.type !== "individual") { %>
                    <div class="unit">
                      <h5>GST No.</h5>
                      <span>:</span>
                      <div class="input">
                        <input readonly type="text" value="<%= user.gst %>" />
                      </div>
                    </div>
                    <% } %>
                  </div>
                </div>

                <div style="display: none" class="docs">
                  <% if (err) { %>
                  <h4 style="color: #e34f4f"><%= err %></h4>
                  <% } %>
                  <form
                    class="doc-box"
                    action="/account?_method=PUT"
                    enctype="multipart/form-data"
                    method="POST"
                  >
                    <div class="unit">
                      <h5>PAN Card No.</h5>
                      <span>:</span>
                      <div class="input">
                        <% if (!user.verified) { %> <% if (user.pan) { %>
                        <input
                          type="text"
                          required
                          name="pan"
                          value="<%= user.pan %>"
                        />
                        <% } else { %>
                        <input type="text" required name="pan" />
                        <% } %> <% } else { %>
                        <input type="text" value="<%= user.pan %>" readonly />
                        <% } %>
                      </div>
                    </div>

                    <div class="unit">
                      <h5>Aadhaar Front</h5>
                      <span>:</span>
                      <div class="input file-inp-hold">
                        <% if (!user.verified) { %> <% if (!user.aadhaarFront) {
                        %>
                        <input
                          onchange="loadFile(event)"
                          type="file"
                          required
                          name="front"
                          accept="image/gif, image/jpeg, image/png, image/webp"
                          class="file-inp"
                        />
                        <% } %> <img id="output" <%= user.aadhaarFront ?
                        `src=/img/${user.aadhaarFront}` : "" %>
                        style="max-width: 100%; max-height: 30vh" /> <% } else {
                        %>
                        <img
                          src="/img/<%= user.aadhaarFront %>"
                          style="width: 100%; max-height: 30vh"
                        />
                        <% } %>
                      </div>
                    </div>

                    <div class="unit">
                      <h5>Aadhaar Back</h5>
                      <span>:</span>
                      <div class="input file-inp-hold">
                        <% if (!user.verified) { %> <% if (!user.aadhaarBack) {
                        %>
                        <input
                          onchange="loadFile2(event)"
                          type="file"
                          required
                          name="back"
                          accept="image/gif, image/jpeg, image/png, image/webp"
                          class="file-inp"
                        />
                        <% } %> <img id="output2" <%= user.aadhaarBack ?
                        `src=/img/${user.aadhaarBack}` : "" %> style="max-width:
                        100%; max-height: 30vh" /> <% } else { %>
                        <img
                          src="/img/<%= user.aadhaarBack %>"
                          style="width: 100%; max-height: 30vh"
                        />
                        <% } %>
                      </div>
                    </div>

                    <% if (!user.verified) { %> <% if (!user.aadhaarBack &&
                    !user.aadhaarBack && !user.pan) { %>
                    <button id="submit-btn" class="btn btn-primary mb-4">
                      Submit
                    </button>
                    <% } %> <% } %>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const loadFile = (event) => {
        let image = document.getElementById("output");
        image.src = URL.createObjectURL(event.target.files[0]);
      };
      const loadFile2 = (event) => {
        let image = document.getElementById("output2");
        image.src = URL.createObjectURL(event.target.files[0]);
      };

      const btns = document.querySelectorAll(".acc-pages button");
      for (let btn of btns) {
        btn.addEventListener("click", () => {
          document.querySelector(".acc-act").classList.remove("acc-act");
          btn.classList.add("acc-act");
          if (document.querySelector(".acc-act").textContent === "Basic") {
            document.querySelector(".docs").style.display = "none";
            document.querySelector(".user-details").style.display =
              "inline-block";
          } else {
            document.querySelector(".docs").style.display = "inline-block";
            document.querySelector(".user-details").style.display = "none";
          }
        });
      }
    </script>
    <script src="../../js/core/jquery.min.js"></script>
    <script src="../../js/core/popper.min.js"></script>
    <script src="../../js/core/bootstrap.min.js"></script>
    <script src="../../js/paper-dashboard.min.js?v=2.0.1"></script>
  </body>
</html>
